(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8750:function(e,t,n){Promise.resolve().then(n.bind(n,3567))},3567:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Page}});var s=n(7437),a=n(4033),r=n(2265);function fetchLinks(e,t){t(!0),fetch("/api/links").then(e=>e.json()).then(n=>{e(n||[]),t(!1)}).catch(()=>t(!1))}function Page(){let[e,t]=(0,r.useState)([]),[n,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[x,f]=(0,r.useState)(""),m=(0,a.useRouter)();async function handleAdd(e){if(e.preventDefault(),f(""),!o){f("URL is required");return}h(!0);let n=await fetch("/api/links",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({url:o,code:i||void 0})});if(201===n.status)c(""),d(""),fetchLinks(t,l);else if(409===n.status){let e=await n.json();f(e.error||"Code exists")}else{let e=await n.json().catch(()=>({}));f(e.error||"Error creating")}h(!1)}async function handleDelete(e){confirm("Delete link "+e+"?")&&(await fetch("/api/"+e,{method:"DELETE"}),fetchLinks(t,l))}async function handleClickCode(e){await fetch("/api/"+e,{method:"PUT"}),m.push("/code/".concat(e))}return(0,r.useEffect)(()=>{fetchLinks(t,l)},[]),(0,s.jsx)("div",{className:"bg-gray-100 p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"TinyLink Dashboard"}),(0,s.jsxs)("form",{onSubmit:handleAdd,className:"bg-white shadow-md rounded-xl p-5 mb-8 border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)("input",{placeholder:"https://example.com/...",value:o,onChange:e=>c(e.target.value),className:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 outline-none"}),(0,s.jsx)("input",{placeholder:"custom code (optional)",value:i,onChange:e=>d(e.target.value),className:"w-48 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 outline-none"}),(0,s.jsx)("button",{disabled:u,className:"px-5 py-3 rounded-lg text-white font-medium shadow \n              ".concat(u?"bg-blue-400":"bg-blue-600 hover:bg-blue-700","\n            "),children:u?"Saving...":"Add"})]}),x&&(0,s.jsx)("p",{className:"text-red-500 mt-2 font-medium",children:x})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-4",children:n?(0,s.jsx)("p",{className:"text-gray-600 animate-pulse",children:"Loading..."}):(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left p-2 font-semibold text-gray-700",children:"Code"}),(0,s.jsx)("th",{className:"text-left p-2 font-semibold text-gray-700",children:"Target URL"}),(0,s.jsx)("th",{className:"p-2 font-semibold text-gray-700",children:"Clicks"}),(0,s.jsx)("th",{className:"p-2 font-semibold text-gray-700",children:"Last Clicked"}),(0,s.jsx)("th",{className:"p-2 font-semibold text-gray-700",children:"Actions"})]})}),(0,s.jsxs)("tbody",{children:[e.map(e=>(0,s.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition",children:[(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("button",{onClick:()=>handleClickCode(e.code),className:"text-blue-600 hover:underline font-medium",children:e.code})}),(0,s.jsx)("td",{className:"p-2 max-w-md",children:(0,s.jsx)("span",{className:"truncate block text-gray-700",children:e.url})}),(0,s.jsx)("td",{className:"text-center p-2 font-semibold text-gray-700",children:e.clicks}),(0,s.jsx)("td",{className:"text-center p-2 text-gray-600",children:e.lastClicked?new Date(e.lastClicked).toLocaleString():"-"}),(0,s.jsxs)("td",{className:"text-center p-2 flex gap-3 justify-center",children:[(0,s.jsx)("button",{onClick:()=>{var t;return null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText(window.location.origin+"/code/"+e.code)},className:"text-blue-600 hover:underline",children:"Copy"}),(0,s.jsx)("button",{onClick:()=>handleDelete(e.code),className:"text-red-600 hover:underline",children:"Delete"})]})]},e.code)),0===e.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"text-gray-500 p-5 text-center",children:"No links created yet \uD83D\uDE80"})})]})]})})]})})}},622:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=n(2265),a=Symbol.for("react.element"),r=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,n){var s,c={},i=null,d=null;for(s in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,s)&&!o.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===c[s]&&(c[s]=t[s]);return{$$typeof:a,type:e,key:i,ref:d,props:c,_owner:l.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,n){"use strict";e.exports=n(622)},4033:function(e,t,n){e.exports=n(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=8750)}),_N_E=e.O()}]);