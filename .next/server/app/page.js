(()=>{var e={};e.id=931,e.ids=[931],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},6368:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=s(7096),r=s(6132),n=s(7284),i=s.n(n),l=s(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4985)),"D:\\DSA Prepaaration\\tinylink\\tinylink\\app\\page.js"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8489)),"D:\\DSA Prepaaration\\tinylink\\tinylink\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\DSA Prepaaration\\tinylink\\tinylink\\app\\page.js"],u="/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6234:(e,t,s)=>{Promise.resolve().then(s.bind(s,6174))},6174:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Page});var a=s(784),r=s(7114),n=s(9885);function fetchLinks(e,t){t(!0),fetch("/api/links").then(e=>e.json()).then(s=>{e(s||[]),t(!1)}).catch(()=>t(!1))}function Page(){let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(""),[d,c]=(0,n.useState)(""),[u,x]=(0,n.useState)(!1),[p,h]=(0,n.useState)(""),m=(0,r.useRouter)();async function handleAdd(e){if(e.preventDefault(),h(""),!l){h("URL is required");return}x(!0);let s=await fetch("/api/links",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({url:l,code:d||void 0})});if(201===s.status)o(""),c(""),fetchLinks(t,i);else if(409===s.status){let e=await s.json();h(e.error||"Code exists")}else{let e=await s.json().catch(()=>({}));h(e.error||"Error creating")}x(!1)}async function handleDelete(e){confirm("Delete link "+e+"?")&&(await fetch("/api/"+e,{method:"DELETE"}),fetchLinks(t,i))}async function handleClickCode(e){await fetch("/api/"+e,{method:"PUT"}),m.push(`/code/${e}`)}return(0,n.useEffect)(()=>{fetchLinks(t,i)},[]),a.jsx("div",{className:"bg-gray-100 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"TinyLink Dashboard"}),(0,a.jsxs)("form",{onSubmit:handleAdd,className:"bg-white shadow-md rounded-xl p-5 mb-8 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex gap-3 items-center",children:[a.jsx("input",{placeholder:"https://example.com/...",value:l,onChange:e=>o(e.target.value),className:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 outline-none"}),a.jsx("input",{placeholder:"custom code (optional)",value:d,onChange:e=>c(e.target.value),className:"w-48 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 outline-none"}),a.jsx("button",{disabled:u,className:`px-5 py-3 rounded-lg text-white font-medium shadow 
              ${u?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}
            `,children:u?"Saving...":"Add"})]}),p&&a.jsx("p",{className:"text-red-500 mt-2 font-medium",children:p})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-4",children:s?a.jsx("p",{className:"text-gray-600 animate-pulse",children:"Loading..."}):(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left p-2 font-semibold text-gray-700",children:"Code"}),a.jsx("th",{className:"text-left p-2 font-semibold text-gray-700",children:"Target URL"}),a.jsx("th",{className:"p-2 font-semibold text-gray-700",children:"Clicks"}),a.jsx("th",{className:"p-2 font-semibold text-gray-700",children:"Last Clicked"}),a.jsx("th",{className:"p-2 font-semibold text-gray-700",children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[e.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition",children:[a.jsx("td",{className:"p-2",children:a.jsx("button",{onClick:()=>handleClickCode(e.code),className:"text-blue-600 hover:underline font-medium",children:e.code})}),a.jsx("td",{className:"p-2 max-w-md",children:a.jsx("span",{className:"truncate block text-gray-700",children:e.url})}),a.jsx("td",{className:"text-center p-2 font-semibold text-gray-700",children:e.clicks}),a.jsx("td",{className:"text-center p-2 text-gray-600",children:e.lastClicked?new Date(e.lastClicked).toLocaleString():"-"}),(0,a.jsxs)("td",{className:"text-center p-2 flex gap-3 justify-center",children:[a.jsx("button",{onClick:()=>navigator.clipboard?.writeText(window.location.origin+"/code/"+e.code),className:"text-blue-600 hover:underline",children:"Copy"}),a.jsx("button",{onClick:()=>handleDelete(e.code),className:"text-red-600 hover:underline",children:"Delete"})]})]},e.code)),0===e.length&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-gray-500 p-5 text-center",children:"No links created yet \uD83D\uDE80"})})]})]})})]})})}},4985:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=s(5153);let r=(0,a.createProxy)(String.raw`D:\DSA Prepaaration\tinylink\tinylink\app\page.js`),{__esModule:n,$$typeof:i}=r,l=r.default,o=l},784:(e,t,s)=>{"use strict";e.exports=s(316).vendored["react-ssr"].ReactJsxRuntime},7114:(e,t,s)=>{e.exports=s(4979)}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[472,624],()=>__webpack_exec__(6368));module.exports=s})();